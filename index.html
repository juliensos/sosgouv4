<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOS-GOUV V3</title>
    <link rel="stylesheet" href="css/sosgouv.css">
</head>
<body>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <h2>SOS-GOUV V3</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Nom d'utilisateur</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="password">Mot de passe</label>
                <input type="password" id="password" name="password" required>
            </div>
            <button type="submit" class="btn">Se connecter</button>
        </form>
        <div id="loginError" style="color: var(--primary-red); margin-top: 15px; text-align: center; display: none;"></div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <header>
            <h1>SOS-GOUV</h1>
            <p>Plateforme de gestion des personnalités politiques</p>
        </header>

        <nav>
            <div class="user-info">
                Connecté en tant que : <span id="currentUser"></span>
            </div>
            <button id="logoutBtn">Déconnexion</button>
        </nav>

        <main>
            <!-- Personnalités Section -->
            <div class="personnalites-container">
                <div class="personnalites-header">
                    <h2>Liste des personnalités</h2>
                    <div>
                        <button class="search-box button" id="showAllBtn"><i class="icon-search"></i> Voir tout</button>
                    </div>
                </div>

                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Rechercher par nom, prénom ou profession...">
                    <button id="searchBtn">Rechercher</button>
                </div>

                <div id="personnalitesList"></div>
            </div>

            <!-- Admin Footer -->
            <div class="admin-footer" id="adminFooter">
                <h3>Administration - Gestion des personnalités</h3>
                <form id="adminForm" class="admin-form">
                    <div class="form-group">
                        <label for="adminNom">Nom *</label>
                        <input type="text" id="adminNom" required>
                    </div>
                    <div class="form-group">
                        <label for="adminPrenom">Prénom *</label>
                        <input type="text" id="adminPrenom" required>
                    </div>
                    <div class="form-group">
                        <label for="adminProfession">Profession</label>
                        <input type="text" id="adminProfession">
                    </div>
                    <div class="form-group">
                        <label for="adminFonction">Fonction</label>
                        <input type="text" id="adminFonction">
                    </div>
                    <div class="form-group">
                        <label for="adminStatut">Statut</label>
                        <select id="adminStatut">
                            <option value="0">0 - Néant</option>
                            <option value="1">1 - Jamais</option>
                            <option value="2">2 - Sous condition</option>
                            <option value="3" selected>3 - OK</option>
                        </select>
                    </div>
                    <div class="form-group full-width" style="display: flex; gap: 10px; align-items: end;">
                        <button type="button" id="searchPersonBtn" class="btn" style="width: auto;"><i class="icon-search"></i></button>
                        <button type="button" id="listPersonBtn" class="btn" style="width: auto;"><i class="icon-users"></i></button>
                        <button type="submit" class="btn">Ajouter / Mettre à jour</button>
                        <button type="button" id="resetFormBtn" class="btn" style="background: var(--primary-red); border-color: var(--primary-red);">Réinitialiser</button>
                    </div>
                </form>
                <input type="hidden" id="editingId" value="">
            </div>
        </main>
    </div>

    <!-- Modal for selection -->
    <div id="selectionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Sélectionner une personnalité</h3>
                <button class="modal-close" id="closeModalBtn">Fermer</button>
            </div>
            <div id="modalPersonnalitesList"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="auth.js"></script>
    <script src="ui.js"></script>
    <script src="personnalites.js"></script>

</body>
</html>